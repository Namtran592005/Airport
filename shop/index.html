<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MONOSHOP - Thời trang Tối giản</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      /* --- Toàn bộ CSS cần thiết --- */
      :root {
        --primary-color: rgb(10, 127, 201); /* Deep Teal */
        --primary-light-color: #e0f2f1; /* Light Teal for backgrounds */
        --secondary-color: #424242; /* Dark Gray for text */
        --dark-color: #1a1a1a;
        --light-color: #f5f5f5;
        --white: #ffffff;
        --border-color: #e0e0e0;
        --box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        --transition: all 0.3s ease;
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: var(--secondary-color);
        background: var(--white);
        overflow-x: hidden;
      }
      a {
        text-decoration: none;
        color: inherit;
      }
      .container {
        width: 100%;
        padding: 0 1.5rem;
        margin: 0 auto;
        max-width: 1200px;
      }

      /* Header */
      header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 1000;
        padding: 1.5rem 0;
        transition: background-color 0.4s ease, box-shadow 0.4s ease,
          padding 0.4s ease;
      }
      header.scrolled {
        background-color: var(--white);
        box-shadow: var(--box-shadow);
        padding: 1rem 0;
      }
      .header-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1.5rem;
      }
      .logo {
        font-size: 1.6rem;
        font-weight: 700;
        color: var(--primary-color);
      }
      .nav-menu {
        display: flex;
        list-style: none;
        align-items: center;
      }
      .nav-item {
        margin-left: 0.5rem;
      }
      .nav-link {
        font-weight: 500;
        transition: var(--transition);
        padding: 0.5rem 1rem;
        border-radius: 6px;
      }
      .nav-link:hover,
      .nav-link.active {
        background-color: var(--primary-light-color);
        color: var(--primary-color);
      }
      .header-cart-icon {
        font-size: 1.3rem;
        position: relative;
        cursor: pointer;
        color: var(--secondary-color);
      }
      .cart-count-header {
        position: absolute;
        top: -8px;
        right: -12px;
        background: var(--primary-color);
        color: var(--white);
        width: 20px;
        height: 20px;
        border-radius: 50%;
        display: none;
        align-items: center;
        justify-content: center;
        font-size: 0.75rem;
        font-weight: bold;
        border: 1px solid var(--white);
      }

      /* Slider */
      .slider-section {
        padding-top: 82px;
      }
      .slider {
        position: relative;
        width: 100%;
        height: 60vh;
        min-height: 350px;
        max-height: 500px;
        overflow: hidden;
      }
      .slide {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        visibility: hidden;
        transition: opacity 1s ease-in-out, visibility 1s ease-in-out;
        background-size: cover;
        background-position: center;
      }
      .slide.active {
        opacity: 1;
        visibility: visible;
      }
      .slide::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.4);
      }
      .slide-content {
        position: relative;
        z-index: 2;
        color: var(--white);
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        padding: 2rem;
      }
      .slide-content h2 {
        font-size: 3rem;
        margin-bottom: 1rem;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.6);
        animation: fadeInDown 1s both;
      }
      .slide-content p {
        font-size: 1.2rem;
        margin-bottom: 2rem;
        max-width: 600px;
        animation: fadeInUp 1s both 0.5s;
      }
      .slide-content .cta-button {
        animation: fadeInUp 1s both 1s;
      }
      .slider-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 100%;
        display: flex;
        justify-content: space-between;
        z-index: 10;
        padding: 0 1rem;
      }
      .slider-nav button {
        background: rgba(0, 0, 0, 0.3);
        border: none;
        color: var(--white);
        font-size: 1.5rem;
        cursor: pointer;
        width: 45px;
        height: 45px;
        border-radius: 50%;
        transition: background 0.3s;
      }
      .slider-nav button:hover {
        background: rgba(0, 0, 0, 0.6);
      }
      .slider-dots {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 10px;
        z-index: 10;
      }
      .dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.5);
        cursor: pointer;
        transition: background 0.3s;
      }
      .dot.active {
        background: var(--white);
      }
      @keyframes fadeInDown {
        from {
          opacity: 0;
          transform: translateY(-30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Các section khác */
      .cta-button {
        background: var(--primary-color);
        color: var(--white);
        padding: 0.6rem 1.5rem;
        border-radius: 4px;
        font-weight: 600;
        transition: var(--transition);
        display: inline-block;
        border: 1px solid var(--primary-color);
        cursor: pointer;
      }
      .cta-button:hover:not(.disabled) {
        background: #004d40;
        border-color: #004d40;
      }
      .cta-button.disabled {
        background: #ccc;
        border-color: #ccc;
        cursor: not-allowed;
      }
      .categories {
        padding: 4rem 0;
        background: var(--light-color);
      }
      .section-title {
        text-align: center;
        margin-bottom: 3rem;
        position: relative;
        font-size: 2rem;
        font-weight: 600;
      }
      .section-title::after {
        content: "";
        display: block;
        width: 60px;
        height: 3px;
        background: var(--primary-color);
        margin: 0.5rem auto 0;
      }
      .category-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 1.5rem;
      }
      .category-card {
        text-align: center;
        padding: 1.5rem 1rem;
        background: var(--white);
        border-radius: 8px;
        border: 1px solid var(--border-color);
        transition: var(--transition);
      }
      .category-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--box-shadow);
        color: var(--primary-color);
      }
      .category-card i {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        color: var(--primary-color);
      }
      .products {
        padding: 4rem 0;
      }
      .product-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 2rem;
      }
      .product-card {
        border: 1px solid var(--border-color);
        border-radius: 8px;
        overflow: hidden;
        transition: var(--transition);
        display: block;
      }
      .product-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }
      .product-img {
        height: 250px;
        background-size: cover;
        background-position: center;
      }
      .product-info {
        padding: 1rem;
        text-align: center;
      }
      .product-title {
        font-size: 1.1rem;
        margin-bottom: 0.5rem;
      }
      .product-price {
        font-weight: 700;
        color: var(--primary-color);
        font-size: 1.2rem;
      }

      /* Cart & Modal */
      .cart-mobile {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        background: var(--primary-color);
        color: var(--white);
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        z-index: 999;
        font-size: 1.5rem;
        cursor: pointer;
      }
      .cart-count {
        position: absolute;
        top: -5px;
        right: -5px;
        background: var(--secondary-color);
        color: var(--white);
        width: 25px;
        height: 25px;
        border-radius: 50%;
        display: none;
        align-items: center;
        justify-content: center;
        font-size: 0.8rem;
        font-weight: bold;
      }
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        z-index: 1001;
        opacity: 0;
        visibility: hidden;
        transition: var(--transition);
      }
      .modal-overlay.active {
        opacity: 1;
        visibility: visible;
      }
      .modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        width: 90%;
        max-width: 600px;
        background: var(--white);
        border-radius: 8px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        z-index: 1002;
        display: flex;
        flex-direction: column;
        max-height: 85vh;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }
      .modal.active {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
        visibility: visible;
      }
      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 1.5rem;
        border-bottom: 1px solid var(--border-color);
      }
      .modal-header h3 {
        font-size: 1.3rem;
      }
      .modal-close {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
      }
      .modal-body {
        padding: 1.5rem;
        overflow-y: auto;
        flex-grow: 1;
      }
      .modal-footer {
        padding: 1rem 1.5rem;
        border-top: 1px solid var(--border-color);
        background: var(--light-color);
        border-bottom-left-radius: 8px;
        border-bottom-right-radius: 8px;
      }
      .cart-item {
        display: flex;
        align-items: center;
        margin-bottom: 1.5rem;
        padding-bottom: 1.5rem;
        border-bottom: 1px solid var(--border-color);
      }
      .cart-item:last-child {
        border-bottom: none;
      }
      .cart-item-img {
        width: 80px;
        height: 80px;
        background-size: cover;
        background-position: center;
        border-radius: 4px;
        margin-right: 1.5rem;
        flex-shrink: 0;
      }
      .cart-item-info h4 {
        font-size: 1rem;
        margin-bottom: 0.25rem;
      }
      .cart-item-price,
      .cart-item-info .item-meta {
        font-size: 0.9rem;
        color: var(--text-light);
      }
      .cart-item-controls {
        display: flex;
        align-items: center;
        margin-left: 1rem;
      }
      .quantity-control {
        display: flex;
        align-items: center;
        margin-right: 1.5rem;
      }
      .quantity-btn {
        background: var(--light-color);
        border: 1px solid var(--border-color);
        width: 30px;
        height: 30px;
        cursor: pointer;
        font-size: 1.2rem;
      }
      .quantity-input {
        width: 40px;
        height: 30px;
        text-align: center;
        border: 1px solid var(--border-color);
        border-left: none;
        border-right: none;
      }
      .quantity-input::-webkit-outer-spin-button,
      .quantity-input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      .cart-item-remove {
        background: none;
        border: none;
        color: #cc0000;
        cursor: pointer;
        font-size: 1.2rem;
      }
      .cart-empty-msg {
        text-align: center;
        color: var(--text-light);
        padding: 2rem 0;
      }
      .cart-total {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 1.2rem;
        font-weight: bold;
        margin-bottom: 1rem;
      }

      /* Footer */
      footer {
        background: var(--dark-color);
        color: var(--white);
        padding: 4rem 0 1.5rem;
      }
      .footer-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
      }
      .footer-col h3 {
        font-size: 1.2rem;
        margin-bottom: 1.5rem;
        position: relative;
        padding-bottom: 0.5rem;
        color: var(--white);
      }
      .footer-col h3::after {
        content: "";
        position: absolute;
        left: 0;
        bottom: 0;
        width: 50px;
        height: 2px;
        background: var(--primary-color);
      }
      .footer-links {
        list-style: none;
      }
      .footer-links li {
        margin-bottom: 0.8rem;
      }
      .footer-links a {
        color: #ccc;
        transition: var(--transition);
      }
      .footer-links a:hover {
        color: var(--white);
        padding-left: 5px;
      }
      .social-links {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
      }
      .social-links a {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        transition: var(--transition);
      }
      .social-links a:hover {
        background: var(--primary-color);
        transform: translateY(-3px);
      }
      .copyright {
        text-align: center;
        padding-top: 2rem;
        margin-top: 2rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        font-size: 0.9rem;
        color: #aaa;
      }

      /* Mobile Menu */
      .mobile-menu-btn {
        display: none;
        background: none;
        border: none;
        font-size: 1.5rem;
        color: var(--secondary-color);
        cursor: pointer;
      }
      .mobile-menu {
        position: fixed;
        top: 0;
        left: -100%;
        width: 80%;
        max-width: 300px;
        height: 100vh;
        background: var(--white);
        z-index: 1002;
        transition: var(--transition);
        padding: 2rem 1rem;
        overflow-y: auto;
      }
      .mobile-menu.active {
        left: 0;
      }
      .mobile-menu-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid var(--border-color);
      }
      .mobile-menu-close {
        background: none;
        border: none;
        font-size: 1.5rem;
        color: var(--secondary-color);
        cursor: pointer;
      }
      .mobile-nav-menu {
        list-style: none;
      }
      .mobile-nav-item {
        margin-bottom: 1rem;
      }
      .mobile-nav-link {
        display: block;
        padding: 0.5rem 0;
        font-weight: 500;
      }

      @media (max-width: 768px) {
        .nav-menu {
          display: none;
        }
        .mobile-menu-btn {
          display: block;
        }
        .slide-content h2 {
          font-size: 2rem;
        }
      }
      @media (max-width: 576px) {
        .cart-item {
          flex-direction: column;
          align-items: flex-start;
        }
        .cart-item-controls {
          margin-left: 0;
          margin-top: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <header id="mainHeader">
      <div class="header-container container">
        <a href="index.html" class="logo">MONOSHOP</a>
        <nav class="desktop-nav">
          <ul class="nav-menu">
            <li class="nav-item">
              <a href="index.html" class="nav-link active">Trang chủ</a>
            </li>
            <li class="nav-item">
              <a href="product.html" class="nav-link">Sản phẩm</a>
            </li>
            <li class="nav-item">
              <a href="about.html" class="nav-link">Giới thiệu</a>
            </li>
            <li class="nav-item">
              <a href="contact.html" class="nav-link">Liên hệ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link header-cart-icon" id="headerCartIcon"
                ><i class="fas fa-shopping-bag"></i
                ><span class="cart-count-header">0</span></a
              >
            </li>
          </ul>
        </nav>
        <button class="mobile-menu-btn" id="mobileMenuBtn">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </header>

    <div class="mobile-menu" id="mobileMenu">
      <div class="mobile-menu-header">
        <a href="index.html" class="logo">MONOSHOP</a>
        <button class="mobile-menu-close" id="mobileMenuClose">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <ul class="mobile-nav-menu">
        <li class="mobile-nav-item">
          <a href="index.html" class="mobile-nav-link active">Trang chủ</a>
        </li>
        <li class="mobile-nav-item">
          <a href="product.html" class="mobile-nav-link">Sản phẩm</a>
        </li>
        <li class="mobile-nav-item">
          <a href="about.html" class="mobile-nav-link">Giới thiệu</a>
        </li>
        <li class="mobile-nav-item">
          <a href="contact.html" class="mobile-nav-link">Liên hệ</a>
        </li>
      </ul>
    </div>
    <div class="overlay" id="overlay"></div>

    <main>
      <section class="slider-section">
        <div class="slider" id="mainSlider"></div>
        <div class="slider-nav">
          <button id="prevSlideBtn"><i class="fas fa-chevron-left"></i></button>
          <button id="nextSlideBtn">
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
        <div class="slider-dots" id="sliderDots"></div>
      </section>

      <section class="categories" id="categories">
        <div class="container">
          <h2 class="section-title">Danh mục</h2>
          <div class="category-grid">
            <a href="product.html?category=ao-thun" class="category-card"
              ><i class="fas fa-tshirt"></i>
              <h3>Áo Thun</h3></a
            >
            <a href="product.html?category=ao-so-mi" class="category-card"
              ><i class="fas fa-user-tie"></i>
              <h3>Áo Sơ Mi</h3></a
            >
            <a href="product.html?category=quan-jean" class="category-card"
              ><i class="fas fa-shoe-prints"></i>
              <h3>Quần Jean</h3></a
            >
            <a href="product.html?category=phu-kien" class="category-card"
              ><i class="fas fa-hat-wizard"></i>
              <h3>Phụ Kiện</h3></a
            >
          </div>
        </div>
      </section>
      <section class="products" id="products">
        <div class="container">
          <h2 class="section-title">Sản phẩm nổi bật</h2>
          <div class="product-grid">
            <a href="detail.html?id=1" class="product-card"
              ><div
                class="product-img"
                style="
                  background-image: url('https://via.placeholder.com/400x500/000/fff?text=Product+1');
                "
              ></div>
              <div class="product-info">
                <h3 class="product-title">Áo Thun Cotton Basic</h3>
                <p class="product-price">250.000đ</p>
              </div></a
            >
            <a href="detail.html?id=2" class="product-card"
              ><div
                class="product-img"
                style="
                  background-image: url('https://via.placeholder.com/400x500/333/fff?text=Product+2');
                "
              ></div>
              <div class="product-info">
                <h3 class="product-title">Quần Jean Slim-fit</h3>
                <p class="product-price">550.000đ</p>
              </div></a
            >
            <a href="detail.html?id=3" class="product-card"
              ><div
                class="product-img"
                style="
                  background-image: url('https://via.placeholder.com/400x500/eee/000?text=Product+3');
                "
              ></div>
              <div class="product-info">
                <h3 class="product-title">Áo Sơ Mi Oxford</h3>
                <p class="product-price">450.000đ</p>
              </div></a
            >
            <a href="detail.html?id=4" class="product-card"
              ><div
                class="product-img"
                style="
                  background-image: url('https://via.placeholder.com/400x500/666/fff?text=Product+4');
                "
              ></div>
              <div class="product-info">
                <h3 class="product-title">Mũ Lưỡi Trai Logo</h3>
                <p class="product-price">180.000đ</p>
              </div></a
            >
          </div>
          <div style="text-align: center; margin-top: 2.5rem">
            <a href="product.html" class="cta-button">Xem tất cả sản phẩm</a>
          </div>
        </div>
      </section>
    </main>

    <div class="cart-mobile" id="mobileCartIcon">
      <i class="fas fa-shopping-bag"></i><span class="cart-count">0</span>
    </div>
    <div class="modal-overlay" id="cartModalOverlay"></div>
    <div class="modal" id="cartModal">
      <div class="modal-header">
        <h3>Giỏ hàng</h3>
        <button class="modal-close" id="cartModalClose">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="cart-items-list" id="cartItemsList"></div>
      </div>
      <div class="modal-footer">
        <div class="cart-total">
          <span>Tổng cộng:</span><span id="cartTotalPrice">0đ</span>
        </div>
        <button
          class="cta-button"
          id="goToCheckoutBtn"
          style="width: 100%; text-align: center"
        >
          Thanh toán
        </button>
      </div>
    </div>

    <footer>
      <div class="footer-container container">
        <div class="footer-col">
          <h3>MONOSHOP</h3>
          <p>Thời trang tối giản, chất lượng bền vững.</p>
          <div class="social-links">
            <a href="#"><i class="fab fa-facebook-f"></i></a
            ><a href="#"><i class="fab fa-instagram"></i></a
            ><a href="#"><i class="fab fa-tiktok"></i></a>
          </div>
        </div>
        <div class="footer-col">
          <h3>Cửa hàng</h3>
          <ul class="footer-links">
            <li><a href="product.html">Sản phẩm</a></li>
            <li><a href="about.html">Giới thiệu</a></li>
            <li><a href="contact.html">Liên hệ</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h3>Hỗ trợ</h3>
          <ul class="footer-links">
            <li><a href="contact.html">Liên hệ</a></li>
            <li><a href="policy.html">Chính sách đổi trả</a></li>
            <li><a href="faq.html">Câu hỏi thường gặp</a></li>
          </ul>
        </div>
      </div>
      <div class="copyright"><p>© 2023 MONOSHOP. All rights reserved.</p></div>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // --- SLIDER SCRIPT ---
        const sliderData = [
          {
            image:
              "https://via.placeholder.com/1600x800/00796b/ffffff?text=WINTER+COLLECTION",
            title: "WINTER COLLECTION 2023",
            subtitle: "Discover the latest trends in minimalist fashion.",
            buttonText: "Shop Now",
            buttonLink: "product.html",
          },
          {
            image:
              "https://via.placeholder.com/1600x800/424242/ffffff?text=SALE+UP+TO+50%25",
            title: "SALE UP TO 50%",
            subtitle: "Limited time offer on selected items.",
            buttonText: "Explore Deals",
            buttonLink: "product.html",
          },
          {
            image:
              "https://via.placeholder.com/1600x800/8d6e63/ffffff?text=NEW+ARRIVALS",
            title: "NEW ARRIVALS",
            subtitle: "Fresh looks for the new season.",
            buttonText: "View Collection",
            buttonLink: "product.html",
          },
        ];
        const sliderContainer = document.getElementById("mainSlider");
        const dotsContainer = document.getElementById("sliderDots");
        const prevBtn = document.getElementById("prevSlideBtn");
        const nextBtn = document.getElementById("nextSlideBtn");
        if (sliderContainer) {
          let currentSlide = 0;
          let slideInterval;
          function renderSlider() {
            sliderContainer.innerHTML = "";
            dotsContainer.innerHTML = "";
            sliderData.forEach((slide, index) => {
              const slideEl = document.createElement("div");
              slideEl.className = `slide ${index === 0 ? "active" : ""}`;
              slideEl.style.backgroundImage = `url(${slide.image})`;
              slideEl.innerHTML = `<div class="slide-content"><h2>${slide.title}</h2><p>${slide.subtitle}</p><a href="${slide.buttonLink}" class="cta-button">${slide.buttonText}</a></div>`;
              sliderContainer.appendChild(slideEl);
              const dotEl = document.createElement("div");
              dotEl.className = `dot ${index === 0 ? "active" : ""}`;
              dotEl.dataset.index = index;
              dotsContainer.appendChild(dotEl);
            });
          }
          function showSlide(index) {
            const slides = sliderContainer.querySelectorAll(".slide");
            const dots = dotsContainer.querySelectorAll(".dot");
            if (slides.length > 0) {
              slides.forEach((slide) => slide.classList.remove("active"));
              dots.forEach((dot) => dot.classList.remove("active"));
              slides[index].classList.add("active");
              dots[index].classList.add("active");
              currentSlide = index;
            }
          }
          function nextSlide() {
            showSlide((currentSlide + 1) % sliderData.length);
          }
          function prevSlide() {
            showSlide(
              (currentSlide - 1 + sliderData.length) % sliderData.length
            );
          }
          function startAutoplay() {
            stopAutoplay();
            slideInterval = setInterval(nextSlide, 5000);
          }
          function stopAutoplay() {
            clearInterval(slideInterval);
          }
          renderSlider();
          nextBtn.addEventListener("click", () => {
            nextSlide();
            startAutoplay();
          });
          prevBtn.addEventListener("click", () => {
            prevSlide();
            startAutoplay();
          });
          dotsContainer.addEventListener("click", (e) => {
            if (e.target.classList.contains("dot")) {
              showSlide(parseInt(e.target.dataset.index));
              startAutoplay();
            }
          });
          sliderContainer.addEventListener("mouseenter", stopAutoplay);
          sliderContainer.addEventListener("mouseleave", startAutoplay);
          startAutoplay();
        }

        // --- COMMON UI & CART SCRIPT ---
        const selectors = {
          header: document.getElementById("mainHeader"),
          mobileMenu: {
            btn: document.getElementById("mobileMenuBtn"),
            menu: document.getElementById("mobileMenu"),
            close: document.getElementById("mobileMenuClose"),
            overlay: document.getElementById("overlay"),
          },
          cart: {
            modal: document.getElementById("cartModal"),
            overlay: document.getElementById("cartModalOverlay"),
            close: document.getElementById("cartModalClose"),
            headerIcon: document.getElementById("headerCartIcon"),
            mobileIcon: document.getElementById("mobileCartIcon"),
            list: document.getElementById("cartItemsList"),
            total: document.getElementById("cartTotalPrice"),
            countHeader: document.querySelector(".cart-count-header"),
            countMobile: document.querySelector(".cart-mobile .cart-count"),
            goToCheckoutBtn: document.getElementById("goToCheckoutBtn"),
          },
        };
        let cart = JSON.parse(localStorage.getItem("shoppingCart")) || [];
        const formatCurrency = (n) =>
          new Intl.NumberFormat("vi-VN", {
            style: "currency",
            currency: "VND",
          }).format(n);
        const saveCart = () =>
          localStorage.setItem("shoppingCart", JSON.stringify(cart));
        if (selectors.header) {
          window.addEventListener("scroll", () =>
            selectors.header.classList.toggle("scrolled", window.scrollY > 50)
          );
        }
        if (selectors.mobileMenu.btn) {
          const openMobileMenu = () => {
            selectors.mobileMenu.menu.classList.add("active");
            selectors.mobileMenu.overlay.classList.add("active");
          };
          const closeMobileMenu = () => {
            selectors.mobileMenu.menu.classList.remove("active");
            selectors.mobileMenu.overlay.classList.remove("active");
          };
          selectors.mobileMenu.btn.addEventListener("click", openMobileMenu);
          selectors.mobileMenu.close.addEventListener("click", closeMobileMenu);
          selectors.mobileMenu.overlay.addEventListener(
            "click",
            closeMobileMenu
          );
        }
        const openCartModal = () => {
          selectors.cart.modal.classList.add("active");
          selectors.cart.overlay.classList.add("active");
        };
        const closeCartModal = () => {
          selectors.cart.modal.classList.remove("active");
          selectors.cart.overlay.classList.remove("active");
        };
        const updateCart = () => {
          const { list, goToCheckoutBtn, countHeader, countMobile, total } =
            selectors.cart;
          list.innerHTML = "";
          if (cart.length === 0) {
            list.innerHTML =
              '<p class="cart-empty-msg">Giỏ hàng của bạn đang trống.</p>';
            goToCheckoutBtn.classList.add("disabled");
          } else {
            goToCheckoutBtn.classList.remove("disabled");
            cart.forEach((item) => {
              const el = document.createElement("div");
              el.className = "cart-item";
              el.dataset.cartItemId = item.cartItemId;
              el.innerHTML = `<div class="cart-item-img" style="background-image: url('${
                item.img || item.images[0]
              }')"></div><div class="cart-item-info"><h4>${
                item.name
              }</h4><p class="item-meta">Size: ${
                item.size
              }</p><p class="cart-item-price">${formatCurrency(
                item.price
              )}</p></div><div class="cart-item-controls"><div class="quantity-control"><button class="quantity-btn quantity-minus">-</button><input type="number" class="quantity-input" value="${
                item.quantity
              }" min="1"><button class="quantity-btn quantity-plus">+</button></div><button class="cart-item-remove"><i class="fas fa-trash-alt"></i></button></div>`;
              list.appendChild(el);
            });
          }
          const totalPrice = cart.reduce(
            (sum, item) => sum + item.price * item.quantity,
            0
          );
          const totalQuantity = cart.reduce(
            (sum, item) => sum + item.quantity,
            0
          );
          total.textContent = formatCurrency(totalPrice);
          countHeader.textContent = totalQuantity;
          countMobile.textContent = totalQuantity;
          countHeader.style.display = totalQuantity > 0 ? "flex" : "none";
          countMobile.style.display = totalQuantity > 0 ? "flex" : "none";
          saveCart();
        };
        const handleCartActions = (e) => {
          const itemEl = e.target.closest(".cart-item");
          if (!itemEl) return;
          const cartItemId = itemEl.dataset.cartItemId;
          const item = cart.find((i) => i.cartItemId === cartItemId);
          if (!item) return;
          if (e.target.closest(".quantity-plus")) item.quantity++;
          else if (e.target.closest(".quantity-minus")) {
            if (--item.quantity <= 0)
              cart = cart.filter((i) => i.cartItemId !== cartItemId);
          } else if (e.target.matches(".quantity-input")) {
            const qty = parseInt(e.target.value);
            if (qty > 0) item.quantity = qty;
            else cart = cart.filter((i) => i.cartItemId !== cartItemId);
          } else if (e.target.closest(".cart-item-remove"))
            cart = cart.filter((i) => i.cartItemId !== cartItemId);
          updateCart();
        };
        selectors.cart.headerIcon.addEventListener("click", openCartModal);
        selectors.cart.mobileIcon.addEventListener("click", openCartModal);
        selectors.cart.close.addEventListener("click", closeCartModal);
        selectors.cart.overlay.addEventListener("click", closeCartModal);
        selectors.cart.list.addEventListener("click", handleCartActions);
        selectors.cart.list.addEventListener("change", handleCartActions);
        selectors.cart.goToCheckoutBtn.addEventListener("click", () => {
          if (cart.length > 0) window.location.href = "pay.html";
        });
        updateCart();
      });
    </script>
  </body>
</html>
